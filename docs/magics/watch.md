# $watch

–í—ã –º–æ–∂–µ—Ç–µ ¬´–Ω–∞–±–ª—é–¥–∞—Ç—å¬ª –∑–∞ —Å–≤–æ–π—Å—Ç–≤–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ `$watch`. –ù–∞–ø—Ä–∏–º–µ—Ä:

```html
<div x-data="{ open: false }" x-init="$watch('open', value => console.log(value))">
  <button @click="open = !open">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</button>
</div>
```

–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è `open` —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤ –∏ `console.log` –≤—ã–¥–∞—Å—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞, –∏—Å–ø–æ–ª—å–∑—É—è ¬´—Ç–æ—á–µ—á–Ω—É—é¬ª –Ω–æ—Ç–∞—Ü–∏—é:

```html
<div x-data="{ foo: { bar: 'baz' }}" x-init="$watch('foo.bar', value => console.log(value))">
  <button @click="foo.bar = 'bob'">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</button>
</div>
```

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ `<button>` –¥–ª—è `foo.bar` –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ ¬´bob¬ª, –∞ –∑–∞—Ç–µ–º –æ–Ω–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª–∏.

<a name="getting-the-old-value"></a>

### –ü–æ–ª—É—á–µ–Ω–∏–µ ¬´—Å—Ç–∞—Ä–æ–≥–æ¬ª –∑–Ω–∞—á–µ–Ω–∏—è

`$watch` –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –∫ –Ω–µ–º—É –¥–æ—Å—Ç—É–ø, –∏—Å–ø–æ–ª—å–∑—É—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```html
<div
  x-data="{ open: false }"
  x-init="$watch('open', (value, oldValue) => console.log(value, oldValue))"
>
  <button @click="open = !open">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</button>
</div>
```

<a name="deep-watching"></a>

### –ì–ª—É–±–æ–∫–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ

`$watch` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –ª—é–±–æ–º —É—Ä–æ–≤–Ω–µ, –Ω–æ –≤—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤ –≤–∏–¥—É, —á—Ç–æ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –≤–µ—Ä–Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞–µ–º–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞, –∞ –Ω–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–¥—Å–≤–æ–π—Å—Ç–≤–∞.

```html
<div
  x-data="{ foo: { bar: 'baz' }}"
  x-init="$watch('foo', (value, oldValue) => console.log(value, oldValue))"
>
  <button @click="foo.bar = 'bob'">–û–±–Ω–æ–≤–∏—Ç—å</button>
</div>
```

–ö–æ–≥–¥–∞ `<button>` –±—É–¥–µ—Ç –Ω–∞–∂–∞—Ç–∞, `foo.bar` –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –∑–Ω–∞—á–µ–Ω–∏–µ ¬´bob¬ª, –∞ ¬´{bar: 'bob'} {bar: 'baz'}¬ª –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—å (–Ω–æ–≤–æ–µ –∏ —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ).

!!! warning "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"

    –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ ¬´–Ω–∞–±–ª—é–¥–∞–µ–º–æ–≥–æ¬ª –æ–±—ä–µ–∫—Ç–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–±–æ—á–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `$watch` –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º—É —Ü–∏–∫–ª—É –∏ –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –∫ –æ—à–∏–±–∫–µ.

```html
<!-- üö´ –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª -->
<div x-data="{ foo: { bar: 'baz', bob: 'lob' }}" x-init="$watch('foo', value => foo.bob = foo.bar)">
  <button @click="foo.bar = 'bob'">–û–±–Ω–æ–≤–∏—Ç—å</button>
</div>
```
