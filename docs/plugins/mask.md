---
title: Mask
description: Автоматическое форматирование текстовых полей по мере ввода текста пользователями
---

# Плагин Mask

![](https://alpinejs.dev/social_mask.jpg)

Плагин Mask позволяет автоматически форматировать поле ввода текста по мере его ввода пользователем.

Это удобно для различных типов входов: номера телефонов, кредитных карт, суммы в долларах, номера счетов, даты и т.д.

<a name="installation"></a>

## Установка

Вы можете использовать этот плагин, включив его из тега `<script>` или установив через NPM:

### Через CDN

Вы можете подключить CDN-сборку этого плагина с помощью тега `<script>`, только подключать нужно ДО основного JS-файла Alpine.

```html
<!-- Alpine Plugins -->
<script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/mask@3/dist/cdn.min.js"></script>

<!-- Alpine Core -->
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js"></script>
```

### Через NPM

Вы можете установить Mask из NPM для использования внутри вашей сборки следующим образом:

```shell
npm install @alpinejs/mask
```

Затем инициализируйте его в своей сборке:

```js
import Alpine from 'alpinejs';
import mask from '@alpinejs/mask';

Alpine.plugin(mask);
Alpine.start();
```

<a name="x-mask"></a>

## x-mask

Основным API для использования этого плагина является директива `x-mask`.

Для начала рассмотрим следующий простой пример поля даты:

```html
<input x-mask="99/99/9999" placeholder="MM/DD/YYYY" />
```

!!! example "Пример"

    <div class="demo">
        <input x-data x-mask="99/99/9999" placeholder="MM/DD/YYYY">
    </div>

Обратите внимание, что текст, вводимый в поле ввода, должен соответствовать формату, задаваемому `x-mask`. Помимо принудительного ввода числовых символов, автоматически добавляются прямые косые черты `/`, если пользователь не ввел их первым.

В масках поддерживаются следующие символы подстановки:

| Знак подстановки | Описание                            |
| ---------------- | ----------------------------------- |
| `*`              | Любой символ                        |
| `a`              | Только буквенные символы (a-z, A-Z) |
| `9`              | Только цифровые символы (0-9)       |

<a name="mask-functions"></a>

## Динамические маски

Иногда простые литералы масок (т. е. `(999) 999-9999`) не являются достаточными. В этих случаях `x-mask:dynamic` позволяет динамически генерировать маски «на лету» на основе пользовательского ввода.

Вот пример ввода данных о кредитной карте, который должен менять маску в зависимости от того, начинается ли номер с цифры «34» или «37» (что означает, что это карта Amex и, следовательно, имеет другой формат).

```html
<input
  x-mask:dynamic="
    $input.startsWith('34') || $input.startsWith('37')
        ? '9999 999999 99999' : '9999 9999 9999 9999'
"
/>
```

Как видно из приведенного примера, каждый раз, когда пользователь вводит значение input, это значение передается в выражение как `$input`. В зависимости от `$input` в поле используется та или иная маска.

Попробуйте сами, набрав число, начинающееся с «34» и число, которое не начинается.

!!! example "Пример"

    <div class="demo">
        <input x-data x-mask:dynamic="
            $input.startsWith('34') || $input.startsWith('37')
                ? '9999 999999 99999' : '9999 9999 9999 9999'
        ">
    </div>

`x-mask:dynamic` также принимает функцию в качестве результата выражения и автоматически передает ей `$input` в качестве первого параметра. Например:

```html
<input x-mask:dynamic="creditCardMask" />

<script>
  function creditCardMask(input) {
    return input.startsWith('34') || input.startsWith('37')
      ? '9999 999999 99999'
      : '9999 9999 9999 9999';
  }
</script>
```

<a name="money-inputs"></a>

## Ввод денежных сумм

Поскольку написание собственного динамического выражения маски для ввода денежных сумм достаточно сложно, Alpine предлагает готовый вариант и предоставляет его в виде `$money()`.

Здесь представлена полностью функционирующая маска ввода денежных сумм:

```html
<input x-mask:dynamic="$money($input)" />
```

!!! example "Пример"

    <div class="demo" x-data>
        <input type="text" x-mask:dynamic="$money($input)" placeholder="0.00">
    </div>

Если необходимо поменять точки на запятые и наоборот (как это требуется в некоторых валютах), то это можно сделать с помощью второго необязательного параметра:

```html
<input x-mask:dynamic="$money($input, ',')" />
```

!!! example "Пример"

    <div class="demo" x-data>
        <input type="text" x-mask:dynamic="$money($input, ',')"  placeholder="0,00">
    </div>

Вы также можете переопределить разделитель тысяч, указав третий необязательный аргумент:

```html
<input x-mask:dynamic="$money($input, '.', ' ')" />
```

!!! example "Пример"

    <div class="demo" x-data>
        <input type="text" x-mask:dynamic="$money($input, '.', ' ')"  placeholder="3 000.00">
    </div>

Вы также можете отменить точность по умолчанию, равную 2 цифрам, используя в качестве четвертого необязательного аргумента любое желаемое количество цифр:

```html
<input x-mask:dynamic="$money($input, '.', ',', 4)" />
```

!!! example "Пример"

    <div class="demo" x-data>
        <input type="text" x-mask:dynamic="$money($input, '.', ',', 4)"  placeholder="0.0001">
    </div>
